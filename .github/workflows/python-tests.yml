name: Python Tests

# Déclenche le workflow sur push et pull request
on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    # Récupère le code
    - uses: actions/checkout@v3
    
    # Configure Python
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    # Vérifie la syntaxe Python
    - name: Check Python syntax
      run: |
        python -m py_compile main.py
        python -m py_compile src/Info.py
        python -m py_compile lib/screen.py
    
    # Vérifie le SQL (si vous avez sqlite3)
    - name: Check SQL syntax
      run: |
        sqlite3 :memory: < db/script.sql
